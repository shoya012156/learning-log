# 📅 YYYY-MM-DD

## ✅ 今日やったこと（作業ログ）
- 論理削除したユーザーを復元する機能（restore）の実装とデバッグを行った  
- `@method()` の引数不足による 405 エラーを修正し、PATCH リクエストとして正しく送信できるようにした  
- Chrome DevTools（Network / Payload / Headers）を使って、フォームから送信されている内容を確認した  
- `laravel.log` を確認し、Blade のコンパイル結果と元ファイルの対応関係を理解した  
- `php artisan route:list` を用いて、404 エラー発生時のルートとミドルウェアの状態を確認した  
- ルートモデルバインディングと SoftDeletes の組み合わせが原因で Controller に到達していないことを特定した  

## 🧠 学んだこと・気づき
- HTML フォームは POST しか送れず、Laravel では `_method` によって PATCH / DELETE を偽装している  
- DevTools では **Header が POST、Payload に `_method=PATCH` がある状態が正常**  
- 405 → 404 とエラーが変化するのは、前の問題が解決して次の問題が表面化した正常な流れ  
- SoftDeletes を使っているモデルは、ルートモデルバインディング時に `deleted_at is null` が自動で付与される  
- そのため、論理削除済みレコードは `User $user` の形では取得できず、Controller に入る前に 404 になる  

## 🧩 詰まったこと・解決策
- **詰まったこと**  
  - PATCH で送っているはずなのに 405 / 404 エラーが発生し、原因の切り分けが難しかった  
- **解決策**  
  - DevTools の Payload を確認し、`@method()` に引数がなく `_method` が空で送信されていることを特定  
  - `@method('PATCH')` に修正し、view キャッシュをクリア  
  - 404 の原因が Controller 内ではなく、ルートモデルバインディング＋SoftDeletes にあると理解し、  
    `User $user` ではなく `$id` を受け取って `onlyTrashed()` で再取得する形に修正した  

## 🔁 振り返り（気持ち・改善点など）
- これまでエラーが出たらすぐコードを触っていたが、  
  **ログ・DevTools・route:list を使って段階的に原因を切り分ける重要性を実感した**  
- AIに聞きながらでも、「何が起きているか」「なぜそうなるか」を自分の言葉で説明できる理解に近づいたと感じる  
- 今後は「Controllerに入っているか」「その前で落ちていないか」を意識してデバッグしたい  
- 今日の内容は、実務や面接で「なぜその実装にしたか」を説明できる具体例として使える  


## 🔜 明日の予定 or ToDo
- 

## 🌱 GitHub草ログ（任意）
- 
